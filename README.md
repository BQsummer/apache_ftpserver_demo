# apache_ftpserver_demo
apache ftpServer 整合spring

1. 将apache ftpServer整合到spring中.
2. ftp的用户管理也整合到数据库中.
3. 监听ftp事件.

遇到的几个坑:
1. ftp_down_rate单位是byte,如果设置过小的话会任何操作不成功,也不报错.
2. 主动模式和被动模式,区别可以在网上搜到,但实际测试中发现主动模式一直连接超时,后来发现主动模式下,由客户端告诉服务器我的数据端口号,让服务器来连我,但是绝大部分的客户端都是在局域网中的,共享外网ip,在wireshark抓包发现,通知给服务器的ip是192.168.1.10X,也就是一般家用路由器分配的地址,服务器肯定连接不上.<br>
如果客户端和服务器在同一局域网下,是能连接的,这就是为什么一部署到服务器上,主动模式不能连接的问题.<br>
所以在nat环境下,就需要服务器在>1024开放多个端口用于数据传输.
